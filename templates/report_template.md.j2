# å‰§æœ¬å™äº‹ç»“æ„åˆ†ææŠ¥å‘Š

## ğŸ“‹ åŸºæœ¬ä¿¡æ¯

- **å‰§æœ¬åç§°**: {{ script_name }}
- **åˆ†ææ—¶é—´**: {{ analysis_time }}
- **ç³»ç»Ÿç‰ˆæœ¬**: v{{ system_version }}
- **åˆ†ææ¨¡å¼**: {{ llm_provider }} / {{ model_name }}

---

## ğŸ“Š æ‰§è¡Œæ¦‚å†µ

| æŒ‡æ ‡ | æ•°å€¼ |
|------|------|
| æ€»æ‰§è¡Œæ—¶é—´ | {{ total_duration }}ç§’ |
| LLMè°ƒç”¨æ¬¡æ•° | {{ total_llm_calls }}æ¬¡ |
| é‡è¯•æ¬¡æ•° | {{ total_retries }}æ¬¡ |
| æˆåŠŸç‡ | {{ success_rate }}% |

---

## ğŸ” é˜¶æ®µä¸€ï¼šæˆå‰§å†²çªé“¾ï¼ˆTCCï¼‰è¯†åˆ«

**è¯†åˆ«ç»“æœ**: å…±è¯†åˆ«å‡º **{{ tccs|length }}** ä¸ªç‹¬ç«‹çš„æˆå‰§å†²çªé“¾

{% for tcc in tccs %}
### {{ tcc.tcc_id }}: {{ tcc.super_objective }}

- **æ ¸å¿ƒå†²çªç±»å‹**: {{ tcc.core_conflict_type }}
- **ç½®ä¿¡åº¦**: {{ "%.0f"|format(tcc.confidence * 100) }}%
- **è¯æ®åœºæ™¯**: {% if tcc.evidence_scenes %}{{ tcc.evidence_scenes|join(", ") }}{% else %}æ— {% endif %}

**å†²çªæè¿°**:
{{ tcc.core_conflict_description }}

**é©±åŠ¨åŠ› (Protagonist)**:
{% for force in tcc.protagonist_forces %}
- {{ force }}
{% endfor %}

**é˜»æŠ—åŠ› (Antagonist)**:
{% for force in tcc.antagonist_forces %}
- {{ force }}
{% endfor %}

{% if tcc.setup_payoff_chains %}
**å› æœé“¾ (Setup-Payoff)**:
{% for chain in tcc.setup_payoff_chains %}
- {{ chain.setup_scene }} â†’ {{ chain.payoff_scene }}: {{ chain.description }}
{% endfor %}
{% endif %}

---
{% endfor %}

{% if tcc_warnings %}
### âš ï¸ TCCç‹¬ç«‹æ€§è­¦å‘Š

{% for warning in tcc_warnings %}
- {{ warning }}
{% endfor %}
{% endif %}

---

## ğŸ“Š é˜¶æ®µäºŒï¼šA/B/Cçº¿åˆ†çº§

### Açº¿ï¼ˆä¸»çº¿ / Spineï¼‰

{% if a_line %}
**{{ a_line.tcc_id }}**: {{ a_line.super_objective }}

- **Spineè¯„åˆ†**: {{ a_line.spine_score }} / 10
- **å¤±è´¥èµŒæ³¨**: {{ a_line.stakes }}
- **ç¯‡å¹…å æ¯”**: {{ a_line.scene_count }}ä¸ªåœºæ™¯

**è¯„ä¼°ç†ç”±**:
{{ a_line.reasoning }}

**é©±åŠ¨åŠ›**: {{ a_line.driving_force }}

**ä¸»è¦é˜»æŠ—åŠ›**: {{ a_line.main_resistance }}

{% if a_line.dynamic_resistances %}
**åŠ¨æ€é˜»æŠ—åŠ›**:
{% for dr in a_line.dynamic_resistances %}
- {{ dr }}
{% endfor %}
{% endif %}

{% else %}
**æœªè¯†åˆ«åˆ°Açº¿** âš ï¸
{% endif %}

---

### Bçº¿ï¼ˆå‰¯çº¿ / Heartï¼‰

{% if b_lines %}
{% for b_line in b_lines %}
**{{ b_line.tcc_id }}**: {{ b_line.super_objective }}

- **Heartè¯„åˆ†**: {{ b_line.heart_score }} / 10
- **æƒ…æ„Ÿæ ¸å¿ƒ**: {{ b_line.emotional_core }}
- **å½±å“Açº¿**: {{ b_line.impact_on_a_line }}

**è¯„ä¼°ç†ç”±**:
{{ b_line.reasoning }}

---
{% endfor %}
{% else %}
**æœªè¯†åˆ«åˆ°Bçº¿**
{% endif %}

---

### Cçº¿ï¼ˆæ¬¡çº¿ / Flavorï¼‰

{% if c_lines %}
{% for c_line in c_lines %}
**{{ c_line.tcc_id }}**: {{ c_line.super_objective }}

- **Flavorè¯„åˆ†**: {{ c_line.flavor_score }} / 10
- **ä¸»é¢˜æ˜ ç…§**: {{ c_line.theme_reflection }}
- **å¯å‰¥ç¦»æ€§**: {{ c_line.removability }}

**è¯„ä¼°ç†ç”±**:
{{ c_line.reasoning }}

---
{% endfor %}
{% else %}
**æœªè¯†åˆ«åˆ°Cçº¿**
{% endif %}

---

## ğŸ”§ é˜¶æ®µä¸‰ï¼šç»“æ„ä¿®æ­£

### ä¿®æ­£æ¦‚å†µ

- **å‘ç°é—®é¢˜**: {{ total_issues }}ä¸ª
- **å·²ä¿®å¤**: {{ fixed_issues }}ä¸ª
- **è·³è¿‡**: {{ skipped_issues }}ä¸ª

{% if modifications %}
### ä¿®æ­£è¯¦æƒ…

{% for mod in modifications %}
#### ä¿®æ­£ {{ loop.index }}: {{ mod.issue_id }}

**åœºæ™¯**: {{ mod.scene_id if mod.scene_id else "å…¨å±€ä¿®æ­£" }}

**å­—æ®µ**: {{ mod.field if mod.field else "N/A" }}

**ä¿®æ­£æ“ä½œ**: {{ mod.change_type if mod.change_type else "è·³è¿‡" }}

**åŸå› **:
{{ mod.reason if mod.reason else "æ— è¯´æ˜" }}

{% if mod.old_value %}
**åŸå€¼**: {{ mod.old_value }}
{% endif %}

{% if mod.new_value %}
**æ–°å€¼**: {{ mod.new_value }}
{% endif %}

**çŠ¶æ€**: {% if mod.applied %}âœ… å·²åº”ç”¨{% else %}â­ï¸ å·²è·³è¿‡{% endif %}

---
{% endfor %}
{% else %}
**æ— éœ€ä¿®æ­£** âœ…
{% endif %}

---

## ğŸ“ˆ TCCå…³ç³»å¯è§†åŒ–

{{ mermaid_diagram }}

{{ mermaid_legend }}

---

## ğŸ’¡ å…³é”®å‘ç°

{% if key_findings %}
{% for finding in key_findings %}
{{ loop.index }}. {{ finding }}
{% endfor %}
{% else %}
- åˆ†æå®Œæˆï¼Œæœªå‘ç°é‡å¤§é—®é¢˜
- å‰§æœ¬ç»“æ„å®Œæ•´ï¼ŒTCCå…³ç³»æ¸…æ™°
{% endif %}

---

## ğŸ¯ å»ºè®®

{% if recommendations %}
{% for rec in recommendations %}
{{ loop.index }}. {{ rec }}
{% endfor %}
{% else %}
- å‰§æœ¬ç»“æ„è‰¯å¥½ï¼Œå»ºè®®ç»´æŒå½“å‰è®¾è®¡
- å¯è€ƒè™‘è¿›ä¸€æ­¥æ·±åŒ–Bçº¿ä¸Açº¿çš„äº¤å‰å½±å“
{% endif %}

---

## ğŸ“ é™„å½•

### æ€§èƒ½ç»Ÿè®¡

#### å„é˜¶æ®µè€—æ—¶

| é˜¶æ®µ | è€—æ—¶ | LLMè°ƒç”¨ | é‡è¯•æ¬¡æ•° |
|------|------|---------|----------|
{% for stage, metrics in stage_metrics.items() %}
| {{ stage }} | {{ "%.2f"|format(metrics.duration) }}s | {{ metrics.llm_calls }} | {{ metrics.retries }} |
{% endfor %}

---

**æŠ¥å‘Šç”Ÿæˆæ—¶é—´**: {{ report_generated_time }}

**ç³»ç»Ÿ**: å‰§æœ¬å™äº‹ç»“æ„åˆ†æç³»ç»Ÿ v{{ system_version }}

---

*æœ¬æŠ¥å‘Šç”± AI è‡ªåŠ¨ç”Ÿæˆï¼Œå»ºè®®ç»“åˆäººå·¥å®¡æ ¸ä½¿ç”¨*
